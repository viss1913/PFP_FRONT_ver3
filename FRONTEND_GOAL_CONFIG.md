# Руководство по редактированию целей (Frontend)

Этот документ описывает, какие поля доступны для изменения в каждой цели и как их отправлять на бэкенд для пересчета.

## Общие параметры клиента
Эти параметры влияют на все цели (особенно ПДС и Пенсию).

| Поле | Тип | Описание |
| :--- | :--- | :--- |
| `avg_monthly_income` | `number` | Средний доход в месяц (грязными). Влияет на ПДС и расчет ИПК. |
| `ipk_current` | `number` | Текущий накопленный ИПК (для Пенсии). |
| `total_liquid_capital` | `number` | Свободный капитал (Бассейн), из которого распределяются деньги по целям. |

---

## Конфигурация по типам целей

### 1. Госпенсия (PENSION)
**ID типа цели**: 1

| Поле | Название в UI | Описание |
| :--- | :--- | :--- |
| `target_amount` | Желаемая пенсия | Сумма в текущих ценах, которую клиент хочет получать. |
| `initial_capital` | Первонач. капитал | Сколько клиент выделяет на эту цель сейчас (из Бассейна). |
| `ops_capital` | Капитал в ОПС | Накопленная часть пенсии (ОПС). Прибавляется к итоговом капиталу. |
| `inflation_rate` | Инфляция | % инфляции для индексации желаемой пенсии. |
| `risk_profile` | Риск-профиль | `CONSERVATIVE`, `BALANCED`, `AGGRESSIVE`. |

---

### 2. Пассивный доход (PASSIVE_INCOME)
**ID типа цели**: 2

| Поле | Название в UI | Описание |
| :--- | :--- | :--- |
| `target_amount` | Желаемый доход | Ежемесячный пассивный доход (в текущих ценах). |
| `term_months` | Срок накопления | Через сколько месяцев должен начаться поток. |
| `initial_capital` | Первонач. капитал | Сумма на старте. |
| `risk_profile` | Риск-профиль | Тип инвестиционного портфеля. |

---

### 3. Защита Жизни (LIFE / НСЖ)
**ID типа цели**: 5

| Поле | Название в UI | Описание |
| :--- | :--- | :--- |
| `target_amount` | Страховая сумма | Целевая выплата по дожитию/рискам. |
| `term_months` | Срок | Длительность контракта в месяцах. |
| `payment_variant` | Частота оплаты | `0` (SPO), `1` (Annual), `12` (Monthly). |
| `program` | Программа | Название продукта (например, `Standard`). |

---

### 4. Другие цели (OTHER / Покупка недвижимости и т.д.)
**ID типа цели**: 9 (и другие)

| Поле | Название в UI | Описание |
| :--- | :--- | :--- |
| `target_amount` | Стоимость покупки | Цена объекта в текущих ценах. |
| `term_months` | Срок | Через сколько месяцев планируется покупка. |
| `initial_capital` | Первонач. капитал | Сколько есть сейчас на эту цель. |
| `risk_profile` | Риск-профиль | Тип портфеля для накопления. |

---

## Как выполнять пересчет

Для получения обновленного плана при изменении любого из параметров выше, используйте:
`POST /api/client/:id/recalculate`

**Payload:**
```json
{
  "client": {
    "avg_monthly_income": 200000,
    "total_liquid_capital": 1000000
  },
  "goals": [
    {
      "goal_type_id": 1,
      "name": "Моя пенсия",
      "target_amount": 150000,
      "ops_capital": 500000,
      "risk_profile": "BALANCED"
    }
  ]
}
```
*Примечание: Вы можете отправлять только те поля, которые изменились. Бэкенд склеит их с существующими данными клиента.*
